{% extends 'partials/base.html' %} {% load l10n humanize %}
{% load static %}
{% block title %}Store- Car Accessories Shop {% endblock %}
{% block meta_description %}All Products{% endblock %}
{% block content %}

                <head>
                <style>
                input[type="range"] {
                    -webkit-appearance: none;
                    height: 7px;
                    background: rgba(#ffc107);
                    border-radius: 5px;
                    background-image: linear-gradient(#ffc107, #ffc107);
                    background-size: 100% 100%;
                    background-repeat: no-repeat;
                    width: 100%; /* Full width of parent container */
                    margin-bottom: 10px; /* Space between range and labels */
                }
                
                input[type="range"]::-webkit-slider-runnable-track {
                    -webkit-appearance: none;
                    height: 20px;
                    border-radius: 50%;
                    background: #ffc107;
                    cursor: ew-resize;
                    box-shadow: 0 0 2px 0 #ffc107;
                    transition: background .3s ease-in-out;
                    width: 100%;
                }
                
                input[type="range"]::-webkit-slider-runnable-track {
                    -webkit-appearance: none;
                    box-shadow: none;
                    border: none;
                    background: transparent;
                }
                
                .price-filter {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                }
                
                .range-labels {
                    display: flex;
                    justify-content: space-between;
                    width: 100%;
                    margin-bottom: 10px; /* Space between labels and button */
                }
                
                .range-labels label {
                    margin: 0 5px;
                }
                
                .filter-button {
                    padding: 10px 20px;
                    background-color: #ffc107;
                    border: none;
                    border-radius: 5px;
                    cursor: pointer;
                    color: white;
                    font-size: 16px;
                    transition: background-color 0.3s ease;
                }
                
                .filter-button:hover {
                    background-color: #cb0f0f;
                    color: white;
                }
                .price-input {
                    width: 90%; /* Adjust width as needed */
                    padding: 5px;
                    border: 1px solid #ccc;
                    border-radius: 5px;
                    text-align: center;
                    font-size: 14px;
                    margin: 0 5px;
                }
                .btn{
                    border: 1px solid rgb(139, 134, 134);
                    padding: 10px; 
                    padding-left: 15px;
                    padding-right: 15px;
                }
                .btn:hover{
                    background-color: #ffc400;
                    border: 1px solid #ffc400;
                }
                
                </style>
        </head>

    
        <!-- Begin E-MariStore Breadcrumb Area -->
        <div class="breadcrumb-area">
            <div class="container">
                <div class="breadcrumb-content">
                    <h2>Shop</h2>
                    <ul>
                        <li><a href="{% url 'Home' %}">Home</a></li>
                        <li class="active">Store</li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- E-MariStore Breadcrumb Area End Here -->

        <!-- Begin E-MariStore Shop List Right sidebar Area -->
        <div class="shop-content_wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-3 col-md-5 order-2">
                        <div class="uren-sidebar-catagories_area">
                            <h5>Filter By:</h5>
                            <div class="category-module uren-sidebar_categories">
                                <div class="category-module_heading">
                                    <h5>Category</h5>
                                </div>
                                <div class="module-body">
                                    <ul class="module-list_item">
                                        {% for c in categories %}
                                                    {% if not c.parent %}  <!-- Show only subcategories -->
                                                        <li>
                                                            <a href="{% url 'product_by_category' c.id c.slug %}">{{ c.title }}</a>
                                                        </li>
                                            {% endif %}
                                        {% endfor %}
                                    </ul>   
                                </div>
                            </div>
                            <!--
                             <div class="uren-sidebar_categories">
                                <div class="uren-categories_title">
                                    <h5>Price</h5>
                                </div>
                                <div class="price-filter">
                                    <input type="range" class="priceRange" id="range" min="{{ min_max_price.price__min }}" max="{{ min_max_price.price__max }}" value="{{ min_max_price.price__min }}" oninput="max_price.value=this.value">
                                    <div class="range-labels">
                                        <label for="priceRange">From: <strong class="text-brand">{{ min_max_price.price__min|floatformat:2 }} Rwf</strong></label>
                                        <label for="priceRange">To: <strong class="text-brand">{{ min_max_price.price__max|floatformat:2 }} Rwf</strong></label>
                                    </div>
                                    <input type="number" class="price-input mb-2" id="max_price" min="{{ min_max_price.price__min }}" max="{{ min_max_price.price__max }}" value="{{ min_max_price.price__min }}" onkeyup="range.value=this.value">
                                    <button class="filter-button w-100" id="price-filter-btn" type="button">Filter</button>
                                </div>
                                
                            </div>
                            --> 
                        </div>
                        <div class="sidebar-banner_area">
                            <div class="banner-item img-hover_effect">
                                <a href="javascript:void(0)">
                                    <img src="{% static 'assets/images/shop/1.jpg' %}" alt="E-MariStore Shop Banner Image">
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-7 order-1">
                        <div class="shop-toolbar">
                            <div class="product-view-mode">
                                <a class="grid-1" data-target="gridview-1" data-toggle="tooltip" data-placement="top" title="1">1</a>
                                <a class="grid-2" data-target="gridview-2" data-toggle="tooltip" data-placement="top" title="2">2</a>
                                <a class="grid-3" data-target="gridview-3" data-toggle="tooltip" data-placement="top" title="3">3</a>
                                <a class="grid-4" data-target="gridview-4" data-toggle="tooltip" data-placement="top" title="4">4</a>
                                <a class="grid-5" data-target="gridview-5" data-toggle="tooltip" data-placement="top" title="5">5</a>
                                <a class="active list" data-target="listview" data-toggle="tooltip" data-placement="top" title="List"><i class="fa fa-th-list"></i></a>
                            </div>
                            <div class="product-item-selection_area">
                                
                                <div class="product-showing">
                                    <label class="select-label">We found ({{ products.count }}) item{{ products.count|pluralize }} for you</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="shop-product-wrap grid gridview-3 listfullwidth img-hover-effect_area row">
                            {% for p in products %}
                            <div class="col-lg-4">
                                <div class="product-slide_item">
                                    <div class="inner-slide">
                                        <div class="single-product">
                                            <div class="product-img" style="margin-bottom: 15px; position: relative;">
                                                <a href="{% url 'product_detail_view' p.pid p.slug %}">
                                                    <img class="primary-img" src="{{ p.image.url }}" alt="{{ p.title }} - Buy On E-MariStore" style="width: 100%; height: 250px; object-fit: cover;">
                                                    <img class="secondary-img" src="{{ p.image.url }}" alt="{{ p.title }} - Buy On E-MariStore" style="width: 100%; height: 250px; object-fit: cover;">
                                                </a>
                                                <div class="add-actions mb-2" style="position: absolute; bottom: 0; left: 0; right: 0; padding: 10px; background-color: rgba(255, 255, 255, 0.8);">
                                                    <ul>
                                                        <li><input type="hidden" value="1" id="product-quantity" class="product-quantity-{{ p.id }}"></li>
                                                        <li><input type="hidden" class="product-pid-{{ p.id }}" value="{{ p.pid }}"></li>
                                                        <li><input type="hidden" class="product-image-{{ p.id }}" value="{{ p.image.url }}"></li>
                                                        <li><input type="hidden" class="product-id-{{ p.id }}" value="{{ p.id }}"></li>
                                                        <li><input type="hidden" class="product-title-{{ p.id }}" value="{{ p.title }}"></li>
                                                        <li><input type="hidden" class="product-slug-{{ p.id }}" value="{{ p.slug }}"></li>
    
                                                        <li><button class="uren-add_cart add-to-cart-btn btn" data-index="{{ p.id }}"  title="Add To Cart" id="add-to-cart-btn"><i class="ion-bag"></i></button>
                                                        </li>
                                                        <li><button class="uren-wishlist btn add-to-wishlist" data-product-item="{{ p.id }}" title="Add To Wishlist"><i
                                                            class="ion-android-favorite-outline" style="fill: aqua;"></i></button>
                                                        </li>
                                                        
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="product-content" style="padding-top: 15px;">
                                                <div class="product-desc_info">
                                                    <h6><a class="product-name" href="">{{ p.category.title }}</a></h6>
                                                    <h6><a class="product-name" href="{% url 'product_detail_view' p.pid p.slug %}">{{ p.title }}</a></h6>
                                                    <div class="price-box">
                                                        <span class="new-price current-product-price-{{ p.id }}">{{ p.converted_price|intcomma }}</span><span class="current-product-currency-{{ p.id }}">{{ selected_currency }}</span>
                                                        <span class="old-price">{{ p.converted_old_price|intcomma }}  {{ selected_currency }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
        <!-- E-MariStore Shop List Right sidebar Area End Here -->
        {% endblock content %}