{% extends 'partials/base.html' %} {% load l10n humanize %}
{% load static %}
{% block content %}
<style>
    .btn{
        border: 1px solid rgb(139, 134, 134);
        padding: 10px; 
        padding-left: 15px;
        padding-right: 15px;
    }
    .btn:hover{
        background-color: #ffc400;
        border: 1px solid #ffc400;
    }
</style>


           <!-- Begin E-MariStore Breadcrumb Area -->
           <div class="breadcrumb-area">
            <div class="container">
                <div class="breadcrumb-content">
                    {% if query and category %}
                        <h4 style="color: aliceblue;">Search Results for "{{ query }}" in "{{ category.title }}"</h4>
                    {% elif query %}
                    <h4 style="color: aliceblue;">Search Results for: "{{ query }}"</h4>
                    {% elif category %}
                    <h4 style="color: aliceblue;">Showing Products in Category: "{{ category.title }}"</h4>
                    {% else %}
                    <h4 style="color: aliceblue;">No Searched Item</h4>
                    {% endif %}
                    
                    <ul>
                        <li><a href="{% url 'Home' %}">Home</a></li>
        
                        <!-- Show category if it's selected -->
                        {% if category and category.title %}
                            <li>{{ category.title }}</li>
                        {% endif %}
        
                        <!-- Show the search query in the breadcrumb -->
                        {% if query %}
                            <li class="active">{{ query }}</li>
                        {% else %}
                            <li class="active"></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </div>
        
        
        <!-- E-MariStore Breadcrumb Area End Here -->

        <!-- Begin E-MariStore Shop List Right sidebar Area -->
        <div class="shop-content_wrapper">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-3 col-md-5 order-2">
                        <div class="uren-sidebar-catagories_area">
                            <div class="category-module uren-sidebar_categories">
                                <div class="category-module_heading">
                                    <h5>Filters</h5>
                                </div>
                                <div class="module-body">
                                    <ul class="module-list_item">
                                        {% for c in categories %}
                                            {% if c.parent %}  <!-- Show only subcategories -->
                                            <li>
                                                <a href="{% url 'product_by_category' c.id c.slug %}">{{ c.title }} <span>({{ c.product_count }})</span></a>
                                            </li>
                                            {% endif %}
                                        {% endfor %}
                                    </ul>   
                                </div>
                            </div>
                            <div class="category-module uren-sidebar_categories">
                                <div class="category-module_heading">
                                    <h5>Vendors</h5>
                                </div>
                                <div class="module-body">
                                    <ul class="module-list_item">
                                        {% for v in vendors %}
                                        <li>
                                            <a href="{% url 'vendor_detail_view' v.vid %}">{{ v.title }} <span>({{ products.count }} Product{{ products.count|pluralize }})</span></a>
                                        </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                            <!--
                             <div class="uren-sidebar_categories">
                                <div class="uren-categories_title">
                                    <h5>Price</h5>
                                </div>
                                <div class="price-filter">
                                    <input type="range" class="priceRange" id="range" min="{{ min_max_price.price__min }}" max="{{ min_max_price.price__max }}" value="{{ min_max_price.price__min }}" oninput="max_price.value=this.value">
                                    <div class="range-labels">
                                        <label for="priceRange">From: <strong class="text-brand">{{ min_max_price.price__min|floatformat:2 }} Rwf</strong></label>
                                        <label for="priceRange">To: <strong class="text-brand">{{ min_max_price.price__max|floatformat:2 }} Rwf</strong></label>
                                    </div>
                                    <input type="number" class="price-input mb-2" id="max_price" min="{{ min_max_price.price__min }}" max="{{ min_max_price.price__max }}" value="{{ min_max_price.price__min }}" onkeyup="range.value=this.value">
                                    <button class="filter-button w-100" id="price-filter-btn" type="button">Filter</button>
                                </div>
                                
                            </div>
                            --> 
                        </div>
                        <div class="sidebar-banner_area">
                            <div class="banner-item img-hover_effect">
                                <a href="javascript:void(0)">
                                    <img src="{% static 'assets/images/shop/1.jpg' %}" alt="E-MariStore Shop Banner Image">
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-7 order-1">
                        <div class="shop-toolbar">
                            <div class="product-view-mode">
                                <a class="grid-1" data-target="gridview-1" data-toggle="tooltip" data-placement="top" title="1">1</a>
                                <a class="grid-2" data-target="gridview-2" data-toggle="tooltip" data-placement="top" title="2">2</a>
                                <a class="grid-3" data-target="gridview-3" data-toggle="tooltip" data-placement="top" title="3">3</a>
                                <a class="grid-4" data-target="gridview-4" data-toggle="tooltip" data-placement="top" title="4">4</a>
                                <a class="grid-5" data-target="gridview-5" data-toggle="tooltip" data-placement="top" title="5">5</a>
                                <a class="active list" data-target="listview" data-toggle="tooltip" data-placement="top" title="List"><i class="fa fa-th-list"></i></a>
                            </div>
                            <div class="product-item-selection_area">
                                
                                <div class="product-showing">
                                    <label class="select-label">We found ({{ products.count }}) item{{ products.count|pluralize }} for you</label>
                                </div>
                            </div>
                        </div>
                        <div class="shop-product-wrap grid gridview-3 listfullwidth img-hover-effect_area row">
                            {% for p in products %}
                            <div class="col-lg-4">
                                <div class="product-slide_item">
                                    <div class="inner-slide">
                                        <div class="single-product">
                                            <div class="product-img">
                                                <a href="{% url 'product_detail_view' p.pid p.slug %}">
                                                    <img class="primary-img" src="{{ p.image.url }}" alt="{{ p.title }} - Buy On E-MariStore">
                                                    <img class="secondary-img" src="{{ p.image.url }}" alt="{{ p.title }} - Buy On E-MariStore">
                                                </a>
                                                <div class="sticker">
                                                    <span class="sticker">-{{ p.get_percentage|floatformat:0 }}%</span>
                                                </div>
                                                <div class="add-actions mb-2">
                                                    <ul>
                                                        <li><input type="hidden" value="1" id="product-quantity" class="product-quantity-{{ p.id }}"></li>
                                                        <li><input type="hidden" class="product-pid-{{ p.id }}" value="{{ p.pid }}"></li>
                                                        <li><input type="hidden" class="product-image-{{ p.id }}" value="{{ p.image.url }}"></li>
                                                        <li><input type="hidden" class="product-id-{{ p.id }}" value="{{ p.id }}"></li>
                                                        <li><input type="hidden" class="product-title-{{ p.id }}" value="{{ p.title }}"></li>
                                                        <li><input type="hidden" class="product-slug-{{ p.id }}" value="{{ p.slug }}"></li>
    
                                                        <li><button class="uren-add_cart add-to-cart-btn btn" data-index="{{ p.id }}"  title="Add To Cart" id="add-to-cart-btn"><i class="ion-bag"></i></button>
                                                        </li>
                                                        <li><button class="uren-wishlist btn add-to-wishlist" data-product-item="{{ p.id }}" title="Add To Wishlist"><i
                                                            class="ion-android-favorite-outline" style="fill: aqua;"></i></button>
                                                        </li>
                                                        
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="product-content">
                                                <div class="product-desc_info">
                                                    <h6><a class="product-name" href="">{{ p.category.title }}</a></h6>
                                                    <h6><a class="product-name" href="{% url 'product_detail_view' p.pid p.slug %}">{{ p.title }}</a></h6>
                                                    <div class="price-box">
                                                        <span class="new-price current-product-price-{{ p.id }}">{{ p.converted_price|intcomma }}</span><span class="current-product-currency-{{ p.id }}">{{ selected_currency }}</span>
                                                        <span class="old-price">{{ p.converted_old_price|intcomma }} &nbsp;{{ selected_currency }}</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="list-slide_item">
                                    <div class="single-product">
                                        <div class="product-img">
                                            <a href="{% url 'product_detail_view' p.pid p.slug %}">
                                                <img class="primary-img" src="{{ p.image.url }}" alt="{{ p.title }} - Buy On E-MariStore">
                                                <img class="secondary-img" src="{{ p.image.url }}" alt="{{ p.title }} - Buy On E-MariStore">
                                            </a>
                                        </div>
                                        <div class="product-content">
                                            <div class="product-desc_info">
                                                <div class="price-box">
                                                    <span>{{ p.category.title }}</span>
                                                </div>
                                                
                                                <div class="price-box mb-2">
                                                    <span>By: </span><a href="">{{ p.vendor.title }}</a>
                                                </div>
                                                
                                                <h6><a class="product-name" href="{% url 'product_detail_view' p.pid p.slug %}">{{ p.title }}</a></h6>
                                                <div class="price-box">
                                                    <span class="new-price">{{ p.converted_price|intcomma }}</span><span>&nbsp;{{ selected_currency }}</span>
                                                    <span class="old-price">{{ p.converted_old_price|intcomma }} &nbsp;{{ selected_currency }}</span>
                                                </div>
                                                <div class="product-short_desc">
                                                    <p>{{ p.description|truncatechars:250|safe }}</p>
                                                </div>
                                            </div>
                                            <div class="add-actions mb-2">
                                                <ul>
                                                    <li><input type="hidden" value="1" id="product-quantity" class="product-quantity-{{ p.id }}"></li>
                                                    <li><input type="hidden" class="product-pid-{{ p.id }}" value="{{ p.pid }}"></li>
                                                    <li><input type="hidden" class="product-image-{{ p.id }}" value="{{ p.image.url }}"></li>
                                                    <li><input type="hidden" class="product-id-{{ p.id }}" value="{{ p.id }}"></li>
                                                    <li><input type="hidden" class="product-title-{{ p.id }}" value="{{ p.title }}"></li>
                                                    <li><input type="hidden" class="product-slug-{{ p.id }}" value="{{ p.slug }}"></li>

                                                    <li><button class="uren-add_cart add-to-cart-btn btn" data-index="{{ p.id }}"  title="Add To Cart" id="add-to-cart-btn"><i class="ion-bag"></i></button>
                                                    </li>
                                                    <li><button class="uren-wishlist btn add-to-wishlist" data-product-item="{{ p.id }}" title="Add To Wishlist"><i
                                                        class="ion-android-favorite-outline" style="fill: aqua;"></i></button>
                                                    </li>
                                                    
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- E-MariStore Shop List Right sidebar Area End Here -->

{% endblock content %}